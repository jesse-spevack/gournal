/* ============================================ */
/* DAILY REFLECTIONS COMPONENT                */
/* ============================================ */

@use "../config/design-tokens" as *;

/* Reflection Cell Container */
.reflection-cell {
  display: flex;
  align-items: stretch;
  min-height: 2em;
  width: 300px;
  max-width: 300px;
  position: relative;
  
  /* Desktop: Wider reflection area for better readability */
  @media (min-width: 480px) {
    width: 400px;
    max-width: 400px;
    min-height: 2em; /* Match input min-height for consistency */
  }
  
  /* Mobile responsive adjustments */
  @media (max-width: 479px) {
    width: 200px;
    max-width: 200px;
  }
}

.reflection-input {
  /* Typography - Handwritten Font */
  font-family: var(--font-caveat);
  font-size: var(--text-md); /* User content size for Caveat readability */
  font-weight: 500;
  letter-spacing: var(--letter-spacing-normal);
  line-height: 1.4;
  
  /* Layout & Sizing */
  width: 100%;
  min-height: 1.4em; /* Single line height */
  border: none;
  display: block;
  
  /* Invisible input - matches background */
  background: transparent;
  color: var(--ink-primary);
  
  /* Spacing */
  padding: var(--space-sm) var(--space-sm) var(--space-sm) var(--space-xs);
  margin: 0;
  
  /* Remove default styling */
  outline: none;
  box-shadow: none;
  border-radius: 0;
  
  /* Base styles: Single-line with ellipsis (mobile behavior by default) */
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  
  /* Transitions */
  transition: 
    background-color var(--duration-fast) var(--ease-standard),
    opacity var(--duration-fast) var(--ease-standard);
  
  /* Hide scrollbar */
  scrollbar-width: none; /* Firefox */
  &::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
  }
  
  /* Desktop: Override mobile behavior to allow multi-line reflections */
  @media (min-width: 480px) {
    white-space: normal;
    word-wrap: break-word;
    min-height: 2em; /* Allow for at least 2 lines */
    max-height: 6em; /* Limit to reasonable height */
    overflow-y: auto; /* Allow vertical scroll for very long content */
    text-overflow: initial; /* Remove ellipsis for multi-line display */
  }
  
  /* Empty state placeholder */
  &:empty::before {
    content: attr(data-placeholder);
    color: var(--ink-primary-30);
    font-style: italic;
  }
  
  /* Focused State */
  &:focus {
    /* Mobile: Enable horizontal scroll while typing */
    overflow-x: auto;
    text-overflow: clip;
    
    /* Desktop: Keep vertical scroll, no horizontal scroll needed */
    @media (min-width: 480px) {
      overflow-x: hidden;
      overflow-y: auto;
    }
  }
  
  /* Save Status Indicators - subtle opacity change only */
  &.saving-success {
    opacity: 0.8;
  }
  
  &.saving-error {
    opacity: 0.6;
  }
}

/* Mobile-specific adjustments */
@media (max-width: 479px) {
  .reflection-input {
    font-size: var(--text-small); /* Slightly smaller on mobile */
    padding: var(--space-xs) var(--space-sm);
  }
  
  .reflection-cell {
    min-width: 100px;
  }
}